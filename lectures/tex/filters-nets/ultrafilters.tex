\chapter{Ультрафільтри}

\section{Ультрафільтр як мажоранта} % лінійно упорядкованої сім'ї

\begin{lemma}
    \label{lem:linear-filter-set-upper-bound}
    Нехай~$\frak M$~--- лінійно упорядкована непорожня сім'я фільтрів, заданих на множині~$X$, тобто для довільни~$\frak F_1, \frak F_2 \in \frak M$ або~$\frak F_1 \subset \frak F_2$, або~$\frak F_2 \subset \frak F_1$.  Тоді об'єднання~$\frak F$ усіх фільтрів сім'ї~$\frak M$ також буде фільтром на~$X$.
\end{lemma}
\begin{proof}
    Перевіримо виконання аксіом фільтра для об'єднання сім'ї множин~$\frak M$. Перші дві аксіоми є очевидними, а тому перевіримо останні дві. 
    
    \textbf{Перетин:} якщо~$A, B \in \frak F$, то знайдуться такі~$\frak F_1, \frak F_2 \in \frak M$, що~$A \in \frak F_1$, $B \in \frak F_2$. За умовою, один з фільтрів~$\frak F_1$ і~$\frak F_2$ мажорує інший. Нехай, без обмеження загальності, $\frak F_1 \subset \frak F_2$.  Тоді окрім множини~$B$ йому належить і множина~$A$, адже~$A \in \frak F_1 \subset \frak F_2$. Оскільки~$\frak F_2$~--- фільтр, то~$A \cap B \in \frak F_2 \subset \frak F$, тобто сім'я~$\frak F$ справді замкнена відносно (скінченного) перетину. 
    
    \textbf{Надмножина:} якщо~$A \in \frak F$ і~$A \subset B \subset X$, то знайдеться такий~$\frak F_1 \in \frak M$, що~$A \in \frak F_1$, а тому~$B \in \frak F_1$, як надмножина елемента фільтра.  Як наслідок, $B \in \frak F$ і сім'я~$\frak F$ виявляється замкненою відносно взяття надмножини.
\end{proof}

\begin{definition}
    \vocab{Ультрафільтром} на~$X$ називається максимальний\footnote{для якого не існує більшого, але не обов'язково більший за кожен інший} за включенням фільтр на~$X$.  Інакше кажучи, фільтр~$\frak A$ на~$X$ називається \emph{ультрафільтром}, якщо будь-який фільтр~$\frak F$ на~$X$, що мажорує~$\frak A$, збігається з~$\frak A$.
\end{definition}

\begin{theorem}
    \label{th:every-filter-has-supset-ultrafilter}
    Для кожного фільтра~$\frak F$ на~$X$ існує ультрафільтр, що його мажорує.
\end{theorem}
\begin{proof}
    Випливає з леми Цорна. Більш детально, необхідно розглянути частково упорядковану множину (сім'ю) фільтрів, що мажорують~$\frak F$. \Cref{lem:linear-filter-set-upper-bound} показує, що довільний ланцюг (лінійно впорядкована підмножина) має верхню межу (також кажуть \emph{верхню грань} або \emph{мажоранту}). 
    
    Тоді лема Цорна стверджує, що у нашій частково упорядкованій множині є максимальний елемент. З одного боку зрозуміло, що він буде ультрафільтром, адже немає іншого фільтра, що його мажорує, а з іншого~--- що він буде мажорувати~$\frak F$, адже усі елементи нашої частково упорядкованої множини за побудовою мажорують~$\frak F$.
\end{proof}

\section{Властивості і критерій ультрафільтра}

\begin{lemma}
    \label{lem:ultrafilter-absorbs-intersections}
    Нехай~$\frak A$~--- ультрафільтр, $A \subset X$ і всі елементи ультрафільтра перетинаються~з~$A$. Тоді~$A \in \frak A$.
\end{lemma}
\begin{proof}
    Додавши до сім'ї множин~$\frak A$ як елемент множину~$A$ ми отримаємо центровану систему множин. Справді, для цього достатньо аби~$\frak A$ була просто фільтром, а точніше замкненою відносно скінченного перетину. Тоді додавши у цей перетин, який є елементом~$\frak A$, ще й~$A$ можна просто скористатися умовою на непорожні перетини~$A$ із елементами~$\frak A$. Зрозуміло, що ці міркування працюють і для ультрафільтрів, адже кожен ультрафільтр є фільтром. Таким чином уся розширена система множин є центрованою. 
    
    За \cref{th:supset-finite-intersection-property} звідси випливає, що знайдеться фільтр~$\frak F$, який містить усі елементи нашої центрованої системи. Але тоді~$\frak F \supset \frak A$, звідки випливає, що~$\frak F = \frak A$, адже~$\frak A$~--- ультрафільтр, і розширюватися уже нікуди. У той же час, за побудовою, $A \in \frak F$, тобто~$A \in \frak A$.
\end{proof}

\begin{remark}
    Якщо зняти умову того, що~$\frak A$~--- ультрафільтр, і сказати що він просто фільтр, то вийде, що його можна розширити до якогось~$\frak A'$ щоб додати якийсь новий елемент~$A$, за умови що цей~$A$  перетинається із усіма елеменами~$\frak A$.
\end{remark}

\begin{theorem}[критерій ультрафільтра]
    \label{th:ultrafilter-criterion}
    Для того, щоб фільтр~$\frak A$ на~$X$ був ультрафільтром, необхідно і достатньо, щоб для довільної множини~$A \subset X$ або сама множина~$A$, або її доповнення~$X \setminus A$ належало фільтру~$\frak A$.
\end{theorem}
\begin{proof}
    \textbf{Необхідність.} Нехай~$\frak A$~--- ультрафільтр, і~$X \setminus A \notin \frak A$. Тоді жодна множина~$B \in \frak A$ не міститься цілком в~$X \setminus A$, тобто будя-яка~$B \in \frak A$ перетинається з~$A$. Отже, за попередньою лемою, $A \in \frak A$. 
    
    \textbf{Достатність.} Припустимо що~$\frak A$~--- не ультрафільтр. Тоді існує фільтр~$\frak F \supset \frak A$ і множина~$A \in \frak F \setminus \frak A$. За побудовою, $A \notin \frak A$. З іншого боку, $X \setminus A$ не перетинається~з~$A$, $A \in \frak F$, отже~$X \setminus A \notin \frak F$, а отже~$X \setminus A \notin \frak A \subset \frak F$.
\end{proof}

\begin{corollary}
    \label{crl:ultrafilter-image-is-ultrafilter}
    Образ ультрафільтра є ультрафільтром.
\end{corollary}
\begin{proof}
    Нехай~$f: X \to Y$ і~$\frak A$~--- ультрафільтр на~$X$. Розглянемо довільну множину~$A \subset Y$. Тоді або~$f\inv (A)$ або~$f\inv (Y \setminus A) = Y \setminus f\inv (A)$ належить~$\frak A$, отже~$A \in f[\frak A]$ або~$Y \setminus A \in f[\frak A]$.
\end{proof}

\section{Ультрафільтри, збіжність і компактність}

\begin{lemma}
    \label{lem:ultrafilter-limitpoint-is-its-limit}
    Нехай~$\frak A$~--- ультрафільтр на хаусдорфовому топологічному просторі~$X$ і~$x \in \LIM(\frak A)$. Тоді~$x = \lim \frak A$.
\end{lemma}
\begin{proof}
    Нехай~$U \in \Omega_x$. Тоді за означенням граничної точки окіл~$U$ перетинається зі всіма елементами ультрафільтра~$\frak A$. За \cref{lem:ultrafilter-absorbs-intersections}~$U \subset \frak A$.
\end{proof}

\begin{theorem}[критерій компактності у термінах ультрафільтрів]
    Для хаусдорфового топологічного простору~$X$ наступні умови еквівалентні:
    \begin{itemize}
        \item $X$ компакт;
        \item кожен ультрафільтр на~$X$ має граничну точку;
        \item кожен ультрафільтр на~$X$ має границю.
    \end{itemize}
\end{theorem}
\begin{proof}
   ~$1 \implies 2$. Фільтр~$\frak F$~--- центрована сім'я множин. Тим більше, центрованою буде сім'я замикань елементів фільтра. Отже, перетин~$\LIM(\frak F)$ цих замикань не є порожнім. 
    
   ~$2 \implies 1$. Нехай~$\frak C$~--- довільна центромана система замкнених підмножин простору~$X$. За \cref{th:supset-finite-intersection-property} існує фільтр~$\frak F \supset \frak C$. Тоді
    \begin{equation*}
        \bigcap_{A \in \frak C} \closure A \supset \bigcap_{A \in \frak F} \closure A = \LIM(\frak F) \ne \emptyset.
    \end{equation*}
    
   ~$2 \implies 3$. За умовою кожен ультрафільтр має граничну точку, а за \cref{lem:ultrafilter-limitpoint-is-its-limit} ця точка буде його границею. 
    
   ~$3 \implies 2$. Розглянемо довільний фільтр~$\frak F$ на~$X$ і виберемо (\cref{th:every-filter-has-supset-ultrafilter}) ультрафільтр~$\frak A \supset \frak F$. За умовою ультрафільтр~$\frak A$ має границю~$x \in X$. Згідно твердження~3) \cref{th:filters-limits-limitpoitns} точка~$x$ є граничною точкою фільтра~$\frak F$.
\end{proof}

\begin{corollary}
    Нехай~$\frak A$~--- ультрафільтр на~$E$, $X$~--- топологічний простір і образ~$f(E)$ функції~$f: E \to X$ лежить в деякому компакті~$K \subset X$. Тоді існує~$\lim_{\frak A} f$.
\end{corollary}
\begin{proof}
    Розглянемо~$f$ як функцію, що діє з~$E$ в~$K$. Оскільки (\cref{crl:ultrafilter-image-is-ultrafilter})~$f[\frak A]$ є ультрафільтром на компакті~$K$, то існує~$\lim f[\frak A]$. Отже, за означенням границі функції за фільтром, $\lim_{\frak A} f = \lim f[\frak A]$.
\end{proof}

\section{Література}

\begin{enumerate}[label={[\arabic*]}]
\item \textbf{Кадец~В.~М.}
Курс функционального анализа /
В.~М.~Кадец~---
Х.: ХНУ им.~В.~Н.~Каразина, 2006. (стр.~484--490).
\end{enumerate}
